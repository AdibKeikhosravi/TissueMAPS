TmSetup - Automated setup and deployment of TissueMAPS in the cloud.
Copyright (C) 2016  Markus D. Herrmann, University of Zurich

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
# Deploy storage
#
---
- name: Collecting facts
  hosts: all
  gather_facts: yes

# - name: Format volume and use as db diskspace
#   hosts:
#     - postgresql_server
#   remote_user: "{{ ansible_ssh_user }}"
#   tags:
#     - db
#   vars:
#     disk_mount_point: /data
#     disk_additional_disks:
#       - disk: /dev/vdb
#         fstype: ext4
#         mount_options: defaults
#         mount: "{{ disk_mount_point }}"
#   roles:
#     - linux-disk

- name: Configure PostgreSQL database server
  hosts:
    - tissuemaps_database
  remote_user: "{{ ansible_ssh_user }}"
  vars:
    create_db_with_ansible: yes
  roles:
    - tmaps-database
  tags:
    - db

