<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>tmlib.illuminati package &mdash; TissueMAPS Library 0.1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="_static/tmaps_favicon.ico"/>
    <link rel="top" title="TissueMAPS Library 0.1.0 documentation" href="index.html" />
    <link rel="up" title="tmlib package" href="tmlib.html" />
    <link rel="next" title="tmlib.imextract package" href="tmlib.imextract.html" />
    <link rel="prev" title="tmlib.dafu package" href="tmlib.dafu.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="tmlib-illuminati-package">
<h1>tmlib.illuminati package<a class="headerlink" href="#tmlib-illuminati-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-tmlib.illuminati.api">
<span id="tmlib-illuminati-api-module"></span><h2>tmlib.illuminati.api module<a class="headerlink" href="#module-tmlib.illuminati.api" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="tmlib.illuminati.api.PyramidBuilder">
<em class="property">class </em><code class="descclassname">tmlib.illuminati.api.</code><code class="descname">PyramidBuilder</code><span class="sig-paren">(</span><em>experiment</em>, <em>prog_name</em>, <em>verbosity</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/api.html#PyramidBuilder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.api.PyramidBuilder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="tmlib.html#tmlib.cluster.ClusterRoutines" title="tmlib.cluster.ClusterRoutines"><code class="xref py py-class docutils literal"><span class="pre">tmlib.cluster.ClusterRoutines</span></code></a></p>
<dl class="method">
<dt id="tmlib.illuminati.api.PyramidBuilder.apply_statistics">
<code class="descname">apply_statistics</code><span class="sig-paren">(</span><em>output_dir</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/api.html#PyramidBuilder.apply_statistics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.api.PyramidBuilder.apply_statistics" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="tmlib.illuminati.api.PyramidBuilder.collect_job_output">
<code class="descname">collect_job_output</code><span class="sig-paren">(</span><em>batch</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/api.html#PyramidBuilder.collect_job_output"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.api.PyramidBuilder.collect_job_output" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="tmlib.illuminati.api.PyramidBuilder.create_job_descriptions">
<code class="descname">create_job_descriptions</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/api.html#PyramidBuilder.create_job_descriptions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.api.PyramidBuilder.create_job_descriptions" title="Permalink to this definition">¶</a></dt>
<dd><p>Create job descriptions for parallel computing.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>**kwargs</strong> &#8211; <p>additional arguments as key-value pairs:
* &#8220;shift&#8221;: whether images should be shifted (<em>bool</em>)
* &#8220;illumcorr&#8221;: whether images should be corrected for illumination</p>
<blockquote>
<div>artifacts (<em>bool</em>)</div></blockquote>
<ul class="simple">
<li>&#8220;thresh&#8221;: whether images should be thresholded and rescaled
(<em>bool</em>)</li>
<li>&#8220;thresh_value&#8221;: fixed pixel value for threshold (<em>int</em>)</li>
<li>&#8220;thresh_percent&#8221;: percentage of pixel values below threshold
(<em>float</em>)</li>
<li>&#8220;stitch_only&#8221;: whether the stitched image should be saved and
no pyramid should be created (<em>bool</em>)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">job descriptions</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">Dict[str, List[dict] or dict]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="tmlib.illuminati.api.PyramidBuilder.run_job">
<code class="descname">run_job</code><span class="sig-paren">(</span><em>batch</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/api.html#PyramidBuilder.run_job"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.api.PyramidBuilder.run_job" title="Permalink to this definition">¶</a></dt>
<dd><p>Create 8-bit greyscale JPEG zoomify pyramid layer of &#8220;channel&#8221; images.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a href="#id5"><span class="problematic" id="id6">`illuminati.layers.ChannelLayer`_</span></a></p>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-tmlib.illuminati.argparser">
<span id="tmlib-illuminati-argparser-module"></span><h2>tmlib.illuminati.argparser module<a class="headerlink" href="#module-tmlib.illuminati.argparser" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-tmlib.illuminati.cli">
<span id="tmlib-illuminati-cli-module"></span><h2>tmlib.illuminati.cli module<a class="headerlink" href="#module-tmlib.illuminati.cli" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="tmlib.illuminati.cli.Illuminati">
<em class="property">class </em><code class="descclassname">tmlib.illuminati.cli.</code><code class="descname">Illuminati</code><span class="sig-paren">(</span><em>args</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/cli.html#Illuminati"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.cli.Illuminati" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="tmlib.html#tmlib.cli.CommandLineInterface" title="tmlib.cli.CommandLineInterface"><code class="xref py py-class docutils literal"><span class="pre">tmlib.cli.CommandLineInterface</span></code></a></p>
<dl class="staticmethod">
<dt id="tmlib.illuminati.cli.Illuminati.call">
<em class="property">static </em><code class="descname">call</code><span class="sig-paren">(</span><em>args</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/cli.html#Illuminati.call"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.cli.Illuminati.call" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize an instance of the cli class with the parsed command
line arguments and call the method matching the name of the subparser.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>args</strong> (<em>arparse.Namespace</em>) &#8211; parsed command line arguments</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a href="#id7"><span class="problematic" id="id8">`tmlib.illuminati.argparser`_</span></a></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="tmlib.illuminati.cli.Illuminati.name">
<code class="descname">name</code><a class="headerlink" href="#tmlib.illuminati.cli.Illuminati.name" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">name of the command line program</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/library/functions.html#str" title="(in Python v2.7)">str</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="tmlib.illuminati.cli.Illuminati.print_logo">
<em class="property">static </em><code class="descname">print_logo</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/cli.html#Illuminati.print_logo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.cli.Illuminati.print_logo" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-tmlib.illuminati.layers">
<span id="tmlib-illuminati-layers-module"></span><h2>tmlib.illuminati.layers module<a class="headerlink" href="#module-tmlib.illuminati.layers" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="tmlib.illuminati.layers.BrightfieldLayer">
<em class="property">class </em><code class="descclassname">tmlib.illuminati.layers.</code><code class="descname">BrightfieldLayer</code><span class="sig-paren">(</span><em>image_file</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/layers.html#BrightfieldLayer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.layers.BrightfieldLayer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Class for a brightfield layer, i.e. a mosaic that can be displayed
in TissueMAPS as RGB.</p>
<p>Currently, brightfield mode is only available for virtual slide formats
supported by the <a class="reference external" href="http://openslide.org/formats">Openslide</a> library.
For compatibility with TissueMAPS the virtual slides are converted to
<em>zoomify</em> format.</p>
<dl class="staticmethod">
<dt id="tmlib.illuminati.layers.BrightfieldLayer.create_from_image_files">
<em class="property">static </em><code class="descname">create_from_image_files</code><span class="sig-paren">(</span><em>image_files</em>, <em>metadata</em>, <em>dx=0</em>, <em>dy=0</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/layers.html#BrightfieldLayer.create_from_image_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.layers.BrightfieldLayer.create_from_image_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Not yet implemented.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">NotSupportedError</span></code> &#8211;</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="tmlib.illuminati.layers.BrightfieldLayer.create_from_slide_file">
<em class="property">static </em><code class="descname">create_from_slide_file</code><span class="sig-paren">(</span><em>slide_file</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/layers.html#BrightfieldLayer.create_from_slide_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.layers.BrightfieldLayer.create_from_slide_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Read highest-resolution level of a virtual slide.</p>
<dl class="docutils">
<dt>slide_file: str</dt>
<dd>absolute path to a virtual slide file</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">mosaic image</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#tmlib.illuminati.layers.BrightfieldLayer" title="tmlib.illuminati.layers.BrightfieldLayer">BrightfieldLayer</a></td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a href="#id9"><span class="problematic" id="id10">`tmlib.readers.OpenslideImageReader`_</span></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="tmlib.illuminati.layers.BrightfieldLayer.create_pyramid">
<code class="descname">create_pyramid</code><span class="sig-paren">(</span><em>layer_dir</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/layers.html#BrightfieldLayer.create_pyramid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.layers.BrightfieldLayer.create_pyramid" title="Permalink to this definition">¶</a></dt>
<dd><p>Create zoomify pyramid (8-bit RGB JPEG images) of mosaic.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>layer_dir</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; absolute path to the directory where pyramid should be saved</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">AttributeError</span></code> &#8211;
when <cite>name</cite> is not set</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="tmlib.illuminati.layers.BrightfieldLayer.level_zero_tile_files">
<code class="descname">level_zero_tile_files</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/layers.html#BrightfieldLayer.level_zero_tile_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.layers.BrightfieldLayer.level_zero_tile_files" title="Permalink to this definition">¶</a></dt>
<dd><p>List the relative path within the pyramid directory to all tile images
of level 0 (highest resolution level).</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="tmlib.illuminati.layers.ChannelLayer">
<em class="property">class </em><code class="descclassname">tmlib.illuminati.layers.</code><code class="descname">ChannelLayer</code><span class="sig-paren">(</span><em>mosaic</em>, <em>metadata</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/layers.html#ChannelLayer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.layers.ChannelLayer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Class for a channel layer, i.e. a mosaic layer that can be displayed
in TissueMAPS as a single grayscale channel or blended with other channels
to RGB (additive color blending).</p>
<dl class="method">
<dt id="tmlib.illuminati.layers.ChannelLayer.clip">
<code class="descname">clip</code><span class="sig-paren">(</span><em>thresh_value=None</em>, <em>thresh_percent=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/layers.html#ChannelLayer.clip"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.layers.ChannelLayer.clip" title="Permalink to this definition">¶</a></dt>
<dd><p>Clip (limit) the pixel values in the mosaic image.</p>
<p>Given a threshold level, values above threshold are set
to the threshold level.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>thresh_value</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; value for the threshold level</li>
<li><strong>thresh_percent</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; percentile to calculate the threshold level,
e.g. if <cite>thresh_percent</cite> is 99.9% then 0.1% of pixels will lie
above threshold</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">clipped mosaic image</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#tmlib.illuminati.layers.ChannelLayer" title="tmlib.illuminati.layers.ChannelLayer">ChannelLayer</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="tmlib.illuminati.layers.ChannelLayer.create_from_files">
<em class="property">static </em><code class="descname">create_from_files</code><span class="sig-paren">(</span><em>experiment</em>, <em>tpoint_ix</em>, <em>channel_ix</em>, <em>zplane_ix</em>, <em>dx=0</em>, <em>dy=0</em>, <em>illumcorr=False</em>, <em>shift=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/layers.html#ChannelLayer.create_from_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.layers.ChannelLayer.create_from_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Load individual images and stitch them together.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>experiment</strong> (<a class="reference internal" href="tmlib.html#tmlib.experiment.Experiment" title="tmlib.experiment.Experiment"><em>tmlib.experiment.Experiment</em></a>) &#8211; configured experiment object</li>
<li><strong>tpoint_ix</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; time point (cycle) index</li>
<li><strong>channel_ix</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; channel index</li>
<li><strong>zplane_ix</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; z-plane index</li>
<li><strong>dx</strong> (<em>int, optional</em>) &#8211; displacement in x direction in pixels; useful when images are
acquired with an overlap in x direction (negative integer value)</li>
<li><strong>dy</strong> (<em>int, optional</em>) &#8211; displacement in y direction in pixels; useful when images are
acquired with an overlap in y direction (negative integer value)</li>
<li><strong>illumcorr</strong> (<em>bool, optional</em>) &#8211; whether images should be corrected for illumination artifacts
(default: <code class="docutils literal"><span class="pre">False</span></code>)</li>
<li><strong>shift</strong> (<em>bool, optional</em>) &#8211; whether images should be aligned between cycles
(default: <code class="docutils literal"><span class="pre">False</span></code>)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">stitched mosaic image</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#tmlib.illuminati.layers.ChannelLayer" title="tmlib.illuminati.layers.ChannelLayer">ChannelLayer</a></p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In case <cite>cycle</cite> is of type <cite>WellPlate</cite>, an overview of the whole well
plate is created. To this end, individual wells are stitched together
and background pixels are inserted between wells to visually separate
them from each other. Empty wells will also be filled with background.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">MetadataError</span></code> &#8211;
when images are not all of the same cycle, channel, plane, or well</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="tmlib.illuminati.layers.ChannelLayer.create_pyramid">
<code class="descname">create_pyramid</code><span class="sig-paren">(</span><em>pyramid_dir</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/layers.html#ChannelLayer.create_pyramid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.layers.ChannelLayer.create_pyramid" title="Permalink to this definition">¶</a></dt>
<dd><p>Create zoomify pyramid (8-bit grayscale JPEG images) of mosaic.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pyramid_dir</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; path to the folder where pyramid should be saved</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="tmlib.illuminati.layers.ChannelLayer.scale">
<code class="descname">scale</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/layers.html#ChannelLayer.scale"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.layers.ChannelLayer.scale" title="Permalink to this definition">¶</a></dt>
<dd><p>Scale mosaic.</p>
<p>Searches the image for the maximum and minimum value,
then returns the image as unsigned 8-bit, scaled such that the maximum
value is 255 and the minimum is zero.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">scaled mosaic image</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#tmlib.illuminati.layers.ChannelLayer" title="tmlib.illuminati.layers.ChannelLayer">ChannelLayer</a></td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">AttributeError</span></code> &#8211;
when mosaic does not exist</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="tmlib.illuminati.layers.ObjectLayer">
<em class="property">class </em><code class="descclassname">tmlib.illuminati.layers.</code><code class="descname">ObjectLayer</code><a class="reference internal" href="_modules/tmlib/illuminati/layers.html#ObjectLayer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.layers.ObjectLayer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
</dd></dl>

</div>
<div class="section" id="module-tmlib.illuminati.segment">
<span id="tmlib-illuminati-segment-module"></span><h2>tmlib.illuminati.segment module<a class="headerlink" href="#module-tmlib.illuminati.segment" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="tmlib.illuminati.segment.compute_cell_centroids">
<code class="descclassname">tmlib.illuminati.segment.</code><code class="descname">compute_cell_centroids</code><span class="sig-paren">(</span><em>sitemat</em>, <em>site_row_nr</em>, <em>site_col_nr</em>, <em>offset</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/segment.html#compute_cell_centroids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.segment.compute_cell_centroids" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dictionary from cell ids to centroids.
Centroids are given as (x, y) tuples where the origin of the coordinate
system is assumed to be in the topleft corner (like in openlayers).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>sitemat</strong> (<em>numpy.ndarray[int]</em>) &#8211; image matrix containing the cell labels</li>
<li><strong>site_row_nr</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; row number of the site</li>
<li><strong>site_col_nr</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; col number of the site</li>
<li><strong>site_width</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; width of each site</li>
<li><strong>site_height</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; height of each site</li>
<li><strong>offset</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; value that is added to all ids in sitemat
(maximum id in the previously processed .site_ix)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">cell ids are located in the first column, the x coordinates of the
centroids in the second column, and the y coordinates in the last one</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Tuple[numpy.ndarray[float], int]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tmlib.illuminati.segment.compute_outline_polygons">
<code class="descclassname">tmlib.illuminati.segment.</code><code class="descname">compute_outline_polygons</code><span class="sig-paren">(</span><em>im</em>, <em>offset_y=0</em>, <em>offset_x=0</em>, <em>contour_level=0.5</em>, <em>poly_tol=0.95</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/segment.html#compute_outline_polygons"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.segment.compute_outline_polygons" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a matrix of a site image with border cells removed,
get a list of lists, each consisting of local
i-j coordinates that make up a polygon.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>im</strong> (<em>numpy.ndarray</em>) &#8211; image matrix where pixel values encode cell ids (background is 0)</li>
<li><strong>offset_y</strong> (<em>int, optional</em>) &#8211; offset in y direction, which is added to each polygons y coordinate</li>
<li><strong>offset_x</strong> (<em>int, optional</em>) &#8211; offset in x direction, which is added to each polygons x coordinate</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">a hash that maps each cell id to a list of polygon vertices
(local i-j coordinates)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Dict</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Objects at the border of the image are automatically discarded.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="tmlib.illuminati.segment.compute_outlines_numpy">
<code class="descclassname">tmlib.illuminati.segment.</code><code class="descname">compute_outlines_numpy</code><span class="sig-paren">(</span><em>labels</em>, <em>keep_ids=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/segment.html#compute_outlines_numpy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.segment.compute_outlines_numpy" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a label matrix, return a matrix of the outlines of labeled objects.
If <cite>keep_ids</cite> is True, the outlines will still consist of their cell&#8217;s id,
otherwise the outlines will be <code class="docutils literal"><span class="pre">True</span></code> and all other pixels <code class="docutils literal"><span class="pre">False</span></code>.
Note that in the case of keeping the ids,
the output matrix will have the original bit depth!</p>
<p>If a pixel is not zero and has at least one neighbor with a different
value, then it is part of the outline.</p>
<p>Taken from the BSD-licensed file:
<a class="reference external" href="https://github.com/CellProfiler/CellProfiler/blob/master/cellprofiler/cpmath/outline.py">https://github.com/CellProfiler/CellProfiler/blob/master/cellprofiler/cpmath/outline.py</a></p>
</dd></dl>

<dl class="function">
<dt id="tmlib.illuminati.segment.compute_outlines_vips">
<code class="descclassname">tmlib.illuminati.segment.</code><code class="descname">compute_outlines_vips</code><span class="sig-paren">(</span><em>im</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/segment.html#compute_outlines_vips"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.segment.compute_outlines_vips" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a label matrix, return a matrix of the outlines of labeled objects.</p>
<p>If a pixel is not zero and has at least one neighbor with a different
value, then it is part of the outline.</p>
<p>For more info about how this works, see
<a class="reference external" href="http://www.vips.ecs.soton.ac.uk/supported/current/doc/html/libvips/libvips-morphology.html">libvips-morphology</a></p>
</dd></dl>

<dl class="function">
<dt id="tmlib.illuminati.segment.create_and_save_lookup_tables">
<code class="descclassname">tmlib.illuminati.segment.</code><code class="descname">create_and_save_lookup_tables</code><span class="sig-paren">(</span><em>image_grid</em>, <em>data_file</em>, <em>output_dir</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/segment.html#create_and_save_lookup_tables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.segment.create_and_save_lookup_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>Create lookup tables (lut) for global object ids
and save them as .npy files.
They are required by TissueMAPS to map pixel positions in a pyramid image
to the corresponding object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>image_grid</strong> (<em>List[List[tmlib.image.SegmentationImage]]</em>) &#8211; image files</li>
<li><strong>data_file</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; path to the <cite>data.h5</cite> file containing the object id datasets</li>
<li><strong>output_dir</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; location were lut files should be saved</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tmlib.illuminati.segment.create_id_lookup_matrices">
<code class="descclassname">tmlib.illuminati.segment.</code><code class="descname">create_id_lookup_matrices</code><span class="sig-paren">(</span><em>sitemat</em>, <em>offset</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/segment.html#create_id_lookup_matrices"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.segment.create_id_lookup_matrices" title="Permalink to this definition">¶</a></dt>
<dd><p>Create lookup matrices of global object ids by adding an <cite>offset</cite> to the
local, site-specific ids.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>sitemat</strong> (<em>numpy.ndarray</em>) &#8211; image matrix where pixel values represent site-specific object ids</li>
<li><strong>offset</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; value that will be added to each object id</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Tuple[numpy.ndarray[np.uint32], np.uint32]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tmlib.illuminati.segment.gather_siteinfo">
<code class="descclassname">tmlib.illuminati.segment.</code><code class="descname">gather_siteinfo</code><span class="sig-paren">(</span><em>file_grid</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/segment.html#gather_siteinfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.segment.gather_siteinfo" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="tmlib.illuminati.segment.local_to_global_ids_vips">
<code class="descclassname">tmlib.illuminati.segment.</code><code class="descname">local_to_global_ids_vips</code><span class="sig-paren">(</span><em>im</em>, <em>offset_id</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/segment.html#local_to_global_ids_vips"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.segment.local_to_global_ids_vips" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an offset to site-local cell labels and then encode
that number as a (R, G, B) triple.
So if at one pixel there was a value of x this would mean
that that pixel belongs to the xth cell in the image <cite>im</cite>.
The function would now add <cite>offset_id</cite> to x and encode the resulting value
in terms of RGB s.t. R * 256^2 + G * 256 + B == x + offset_id</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>im</strong> (<em>Vips.Image</em>) &#8211; each pixel indicates to which object this pixel belongs</li>
<li><strong>offset_id</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; value to add to all labels</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">RGB image with band format UCHAR</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Vips.Image</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tmlib.illuminati.segment.remove_border_objects_numpy">
<code class="descclassname">tmlib.illuminati.segment.</code><code class="descname">remove_border_objects_numpy</code><span class="sig-paren">(</span><em>im</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/segment.html#remove_border_objects_numpy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.segment.remove_border_objects_numpy" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a matrix of a site image, set all pixels with
ids belonging to border objects to zero.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>im</strong> (<em>numpy.ndarray</em>) &#8211; image matrix with values corresponding to object ids</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">modified image matrix with pixel values of border objects set to 0</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">numpy.ndarray</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tmlib.illuminati.segment.remove_border_objects_vips">
<code class="descclassname">tmlib.illuminati.segment.</code><code class="descname">remove_border_objects_vips</code><span class="sig-paren">(</span><em>im</em>, <em>is_source_uint16=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/segment.html#remove_border_objects_vips"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.segment.remove_border_objects_vips" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a matrix of a site image, set all pixels with
ids belonging to border objects to zero.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>im</strong> (<em>Vips.Image</em>) &#8211; image matrix with values corresponding to object ids</li>
<li><strong>is_source_uint16</strong> (<em>bool, optional</em>) &#8211; indicating if the source band format is uin16 (defaults to uint8)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">modified image matrix with pixel values of border objects set to 0</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Vips.Image</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tmlib.illuminati.segment.remove_objects_numpy">
<code class="descclassname">tmlib.illuminati.segment.</code><code class="descname">remove_objects_numpy</code><span class="sig-paren">(</span><em>im</em>, <em>ids</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/segment.html#remove_objects_numpy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.segment.remove_objects_numpy" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a matrix of a site image, set all pixels whose values
are in &#8220;ids&#8221; to zero.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>im</strong> (<em>numpy.ndarray</em>) &#8211; image matrix with values corresponding to object ids</li>
<li><strong>ids</strong> (<em>List[int]</em>) &#8211; unique object ids</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">modified image matrix with pixel values in <cite>ids</cite> set to 0</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tmlib.illuminati.segment.remove_objects_vips">
<code class="descclassname">tmlib.illuminati.segment.</code><code class="descname">remove_objects_vips</code><span class="sig-paren">(</span><em>im</em>, <em>ids</em>, <em>is_source_uint16=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/segment.html#remove_objects_vips"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.segment.remove_objects_vips" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a matrix of a site image, set all pixels whose values
are in &#8220;ids&#8221; to zero.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>im</strong> (<em>Vips.Image</em>) &#8211; image matrix with values corresponding to object ids</li>
<li><strong>ids</strong> (<em>List[int]</em>) &#8211; unique object ids</li>
<li><strong>is_source_uint16</strong> (<em>bool, optional</em>) &#8211; indicating if the source band format is uin16 (defaults to uint8)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">modified image matrix with pixel values in ids set to 0</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Vips.Image</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tmlib.illuminati.segment.save_outline_polygons">
<code class="descclassname">tmlib.illuminati.segment.</code><code class="descname">save_outline_polygons</code><span class="sig-paren">(</span><em>outlines</em>, <em>filename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/segment.html#save_outline_polygons"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.segment.save_outline_polygons" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-tmlib.illuminati.stitch">
<span id="tmlib-illuminati-stitch-module"></span><h2>tmlib.illuminati.stitch module<a class="headerlink" href="#module-tmlib.illuminati.stitch" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="tmlib.illuminati.stitch.calc_grid_coordinates_from_layout">
<code class="descclassname">tmlib.illuminati.stitch.</code><code class="descname">calc_grid_coordinates_from_layout</code><span class="sig-paren">(</span><em>stitch_dims</em>, <em>stitch_layout</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/stitch.html#calc_grid_coordinates_from_layout"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.stitch.calc_grid_coordinates_from_layout" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the position of each image in the stitched mosaic image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>stitch_dims</strong> (<em>Dict[str, int]</em>) &#8211; number of rows (&#8220;n_rows&#8221;) and number of columns (&#8220;n_cols&#8221;)
of the stitched mosaic image</li>
<li><strong>stitch_layout</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; &#8220;horizontal&#8221;, &#8220;zigzag_horizontal&#8221;, &#8220;vertical&#8221;, or &#8220;zigzag_vertical&#8221;</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">pair of zero-based &#8220;row&#8221; (y) and &#8220;column&#8221; (x) position indices for each
individual image in the stitched mosaic image in the order of
acquisition, i.e. sorted according to image <em>site</em></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first">List[Tuple[int]]</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">TypeError</span></code> &#8211;
when <cite>stitch_layout</cite> doesn&#8217;t have type string</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211;
when <cite>stitch_layout</cite> is not in the set of the possible options</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tmlib.illuminati.stitch.calc_grid_coordinates_from_positions">
<code class="descclassname">tmlib.illuminati.stitch.</code><code class="descname">calc_grid_coordinates_from_positions</code><span class="sig-paren">(</span><em>stage_positions</em>, <em>reverse_rows=False</em>, <em>reverse_columns=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/stitch.html#calc_grid_coordinates_from_positions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.stitch.calc_grid_coordinates_from_positions" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the relative position of each image within the acquisition grid.
The coordinates are one-based to be consistent with the OME data model.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>stage_positions</strong> (<em>List[Tuple[float]]</em>) &#8211; absolute microscope stage positions</li>
<li><strong>reverse_rows</strong> (<em>bool, optional</em>) &#8211; sort positions along row dimension in descending order</li>
<li><strong>reverse_columns</strong> (<em>bool, optional</em>) &#8211; sort positions along column dimension in descending order</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Since stage positions may not be identical for different channels acquired
at the same site, the values are divided by 10 and then rounded (converted
to integers).</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><ul class="simple">
<li><em>List[Tuple[int]]</em> &#8211;
relative positions (zero-based coordinates) within the grid</li>
<li><em>TODO</em></li>
<li><em>&#8212;-</em></li>
<li><em>How to deal with reversing of axes in an automated way?</em></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tmlib.illuminati.stitch.calc_sites_number">
<code class="descclassname">tmlib.illuminati.stitch.</code><code class="descname">calc_sites_number</code><span class="sig-paren">(</span><em>image_files</em>, <em>regexp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/stitch.html#calc_sites_number"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.stitch.calc_sites_number" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the maximum position, i.e. the total number of image acquisition
sites from a set of image filenames.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>image_files</strong> (<em>List[str]</em>) &#8211; image filenames</li>
<li><strong>regexp</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; <p>named regular expression containing a symbolic group name &#8220;site&#8221;
(see <a class="reference external" href="https://docs.python.org/2/library/re.html">re module</a> for</p>
<blockquote>
<div>more information on regular expressions)</div></blockquote>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">number of image acquisition sites</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first"><a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v2.7)">int</a></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211;
when <cite>regexp</cite> doesn&#8217;t match <cite>image_files</cite></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tmlib.illuminati.stitch.calc_stitch_dimensions">
<code class="descclassname">tmlib.illuminati.stitch.</code><code class="descname">calc_stitch_dimensions</code><span class="sig-paren">(</span><em>stage_positions</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/stitch.html#calc_stitch_dimensions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.stitch.calc_stitch_dimensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine stitch dimensions from stage positions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>stage_positions</strong> (<em>List[Tuple[float]]</em>) &#8211; stage positions in row (x) and column (y) direction</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">number of rows and columns of the stitched mosaic image</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">Tuple[int]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tmlib.illuminati.stitch.calc_stitch_layout">
<code class="descclassname">tmlib.illuminati.stitch.</code><code class="descname">calc_stitch_layout</code><span class="sig-paren">(</span><em>stitch_dims</em>, <em>stage_positions</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/stitch.html#calc_stitch_layout"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.stitch.calc_stitch_layout" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the stitch layout of the mosaic image, i.e. in which order
individual images need to be stitched together.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>stitch_dims</strong> (<em>Dict[str, int]</em>) &#8211; number of rows and columns of the stitched mosaic image</li>
<li><strong>stage_positions</strong> (<em>Tuple[float]</em>) &#8211; stage positions in row (x) and column (y) direction</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">stitch layout: &#8220;horizontal&#8221;, &#8220;zigzag_horizontal&#8221;, &#8220;vertical&#8221;, or
&#8220;zigzag_vertical&#8221;</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first"><a class="reference external" href="https://docs.python.org/library/functions.html#str" title="(in Python v2.7)">str</a></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> &#8211;
when stitch layout can&#8217;t be determined</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tmlib.illuminati.stitch.guess_stitch_dimensions">
<code class="descclassname">tmlib.illuminati.stitch.</code><code class="descname">guess_stitch_dimensions</code><span class="sig-paren">(</span><em>n_sites</em>, <em>stitch_major_axis='vertical'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tmlib/illuminati/stitch.html#guess_stitch_dimensions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tmlib.illuminati.stitch.guess_stitch_dimensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple algorithm to guess correct dimensions of a stitched mosaic image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>n_sites</strong> (<a class="reference external" href="https://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; total number of sites (individual images) in the stitched mosaic image</li>
<li><strong>stitch_major_axis</strong> (<em>str, optional</em>) &#8211; <code class="docutils literal"><span class="pre">&quot;horizontal&quot;</span></code> if there are more columns than rows and
<code class="docutils literal"><span class="pre">&quot;vertical&quot;</span></code> otherwise (default: <code class="docutils literal"><span class="pre">&quot;vertical&quot;</span></code>)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">number of rows and columns of the stitched mosaic image</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Tuple[int]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-tmlib.illuminati">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-tmlib.illuminati" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/tmaps_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">tmlib.illuminati package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-tmlib.illuminati.api">tmlib.illuminati.api module</a></li>
<li><a class="reference internal" href="#module-tmlib.illuminati.argparser">tmlib.illuminati.argparser module</a></li>
<li><a class="reference internal" href="#module-tmlib.illuminati.cli">tmlib.illuminati.cli module</a></li>
<li><a class="reference internal" href="#module-tmlib.illuminati.layers">tmlib.illuminati.layers module</a></li>
<li><a class="reference internal" href="#module-tmlib.illuminati.segment">tmlib.illuminati.segment module</a></li>
<li><a class="reference internal" href="#module-tmlib.illuminati.stitch">tmlib.illuminati.stitch module</a></li>
<li><a class="reference internal" href="#module-tmlib.illuminati">Module contents</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="modules.html">tmlib</a><ul>
  <li><a href="tmlib.html">tmlib package</a><ul>
      <li>Previous: <a href="tmlib.dafu.html" title="previous chapter">tmlib.dafu package</a></li>
      <li>Next: <a href="tmlib.imextract.html" title="next chapter">tmlib.imextract package</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/tmlib.illuminati.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Markus D. Herrmann, Robin Hafen.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="_sources/tmlib.illuminati.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>