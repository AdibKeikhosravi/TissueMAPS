#!/usr/bin/env python
import os
import argparse

import tmlib.models as tm
from tmlib.logging_utils import configure_logging


def create_user(name, password, email):
    '''Create a `TissueMAPS` user.

    Parameters
    ----------
    name: str
        user name
    password: str
        password
    email: str
        email address
    db_uri: str, optional
        URI of the database
    '''
    with tm.utils.MainSession() as session:
        user = tm.User(name=name, password=password, email=email)
        session.add(user)


if __name__ == '__main__':

    parser = argparse.ArgumentParser('Create a TissueMAPS user.')
    parser.add_argument('-n', '--name', help='name')
    parser.add_argument('-p', '--password', help='password')
    parser.add_argument('-e', '--email', help='email address')

    args = parser.parse_args()

    configure_logging()

    create_user(args.name, args.password, args.email)
