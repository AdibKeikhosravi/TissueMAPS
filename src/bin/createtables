#!/usr/bin/env python
import argparse

import tmlib.models


def create_tables(xl=False):
    '''Creates all tables defined by declarative classes in tmlib.models.

    Parameters
    ----------
    xl: bool, optional
        whether tables should be created for PostgresXL database
        (default: ``False``)
    '''
    if xl:
        psxl = tmlib.models.PostgresXl()
        psxl.create_tables()
    else:
        engine = tmlib.models.utils.create_db_engine()
        tmlib.models.Model.metadata.create_all(engine)


if __name__ == '__main__':

    parser = argparse.ArgumentParser('Create tables in TissueMAPS database.')
    parser.add_argument(
        '--xl', action='store_true', help='use PostgresXL database cluster'
    )

    args = parser.parse_args()

    create_tables(args.xl)
