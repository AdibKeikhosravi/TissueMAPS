#!/usr/bin/env python
import argparse
from tmlib.logging_utils import configure_logging


def create_lib_config():
    from tmlib import cfg as lib_cfg
    lib_cfg.write()


def create_server_config():
    try:
        from tmserver import cfg as server_cfg
    except ImportError:
        raise ImportError(
            'Cannot build server configuration: '
            '"tmserver" package not installed!'
        )
    server_cfg.write()


if __name__ == '__main__':

    parser = argparse.ArgumentParser('Create TissueMAPS configuration file.')
    parser.add_argument(
        '--server', action='store_true',
        help='also build server configuration'
    )

    args = parser.parse_args()

    configure_logging()

    create_lib_config()

    if args.server:
        create_server_config()
