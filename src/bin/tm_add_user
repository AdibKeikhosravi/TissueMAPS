#!/usr/bin/env python
import argparse

import tmlib.models as tm


def add_user(name, password, email):
    with tm.utils.MainSession() as session:
        user = tm.User(name=name, password=password, email=email)
        session.add(user)


if __name__ == '__main__':

    parser = argparse.ArgumentParser(
        'Add a new user to the TissueMAPS database.'
    )
    parser.add_argument('-n', '--name', help='name')
    parser.add_argument('-p', '--password', help='password')
    parser.add_argument('-e', '--email', help='email address')

    args = parser.parse_args()

    add_user(args.name, args.password, args.email)
